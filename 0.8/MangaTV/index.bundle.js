!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Sources=t():e.Sources=t()}(this,function(){return function(){"use strict";var e={d:function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{MangaTV:function(){return Tn},MangaTVInfo:function(){return jn}});class n{id;constructor(e){this.id=e}registerInterceptor(){Application.registerInterceptor(this.id,Application.Selector(this,"interceptRequest"),Application.Selector(this,"interceptResponse"))}unregisterInterceptor(){Application.unregisterInterceptor(this.id)}}const o={},s={},r=async e=>{if(o[e])return await o[e],void await r(e);o[e]=new Promise(t=>s[e]=()=>{delete o[e],t()})};class i extends n{options;promise;currentRequestsMade=0;lastReset=Date.now();imageRegex=new RegExp(/\.(png|gif|jpeg|jpg|webp)(\?|$)/i);constructor(e,t){super(e),this.options=t}async interceptRequest(e){return this.options.ignoreImages&&this.imageRegex.test(e.url)||(await r(this.id),await this.incrementRequestCount(),t=this.id,s[t]&&s[t]()),e;var t}async interceptResponse(e,t,n){return n}async incrementRequestCount(){if(await this.promise,(Date.now()-this.lastReset)/1e3>this.options.bufferInterval&&(this.currentRequestsMade=0,this.lastReset=Date.now()),this.currentRequestsMade+=1,this.currentRequestsMade>=this.options.numberOfRequests){const e=(Date.now()-this.lastReset)/1e3;if(e<=this.options.bufferInterval){const t=this.options.bufferInterval-e;console.log(`[BasicRateLimiter] rate limit hit, sleeping for ${t}`),this.promise=Application.sleep(t)}}}}function a(e){const t={},n=e.match(/^(?:([a-zA-Z][a-zA-Z\d+\-.]*):)?(?:\/\/([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/);if(!n)throw new Error("Invalid URL string provided.");if(void 0!==n[1]&&""!==n[1]&&(t.protocol=n[1]),void 0!==n[2]&&""!==n[2]){const e=n[2];let o="",s="";const r=e.indexOf("@");if(-1!==r){if(o=e.substring(0,r),s=e.substring(r+1),""!==o){const e=o.indexOf(":");-1!==e?(t.username=o.substring(0,e),t.password=o.substring(e+1)):(t.username=o,t.password="")}}else s=e;if(""!==s)if(s.startsWith("[")){const e=s.indexOf("]");if(-1===e)throw new Error("Invalid IPv6 address in URL update.");t.hostname=s.substring(0,e+1);const n=s.substring(e+1);n.startsWith(":")&&(t.port=n.substring(1))}else{const e=s.lastIndexOf(":");-1!==e&&s.indexOf(":")===e?(t.hostname=s.substring(0,e),t.port=s.substring(e+1)):(t.hostname=s,t.port="")}}if(void 0!==n[3]&&""!==n[3]&&(t.path=n[3].startsWith("/")?n[3]:`/${n[3]}`),void 0!==n[4]){const e={},o=n[4].split("&");for(const t of o){if(!t)continue;const[n,o=""]=t.split("=");if(void 0===n)continue;const s=decodeURIComponent(n),r=decodeURIComponent(o);if(s in e){const t=e[s];Array.isArray(t)?t.push(r):e[s]=[t,r]}else e[s]=r}t.queryItems=e}return void 0!==n[5]&&(t.fragment=n[5]),t}Error;class c{protocol;hostname;path;username;password;port;queryItems;fragment;constructor(e){const t=a(e);if(!t.hostname||!t.protocol)throw new Error("URL Hostname and Protocol are required");this.hostname=t.hostname,this.protocol=t.protocol,this.path=t.path??"",this.username=t.username,this.password=t.password,this.port=t.port,this.queryItems=t.queryItems,this.fragment=t.fragment}toString(){let e=`${this.protocol}://`;if(void 0!==this.username&&""!==this.username&&(e+=this.username,void 0!==this.password&&""!==this.password&&(e+=`:${this.password}`),e+="@"),e+=this.hostname,void 0!==this.port&&""!==this.port&&(e+=`:${this.port}`),""!==this.path&&(e+=this.path.startsWith("/")?this.path:`/${this.path}`),void 0!==this.queryItems){const t=Object.keys(this.queryItems),n=[];if(t.length>0)for(const e of t){const t=this.queryItems[e];if(Array.isArray(t))for(const o of t)n.push(`${encodeURIComponent(e)}=${encodeURIComponent(o)}`);else void 0!==t&&n.push(`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)}e+=`?${n.join("&")}`}return void 0!==this.fragment&&(e+=`#${this.fragment}`),e}setProtocol(e){if(""===e)throw new Error("Protocol is required");return this.protocol=e,this}setUsername(e){return this.username=""===e?void 0:e,this}setPassword(e){return this.password=""===e?void 0:e,this}setHostname(e){if(""===e)throw new Error("Hostname is required");return this.hostname=e,this}setPort(e){return this.port=""===e?void 0:e,this}setPath(e){return this.path=e.startsWith("/")?e:`/${e}`,this}addPathComponent(e){return this.path=(this.path??"")+(e.startsWith("/")?e:`/${e}`),this}setQueryItems(e){return this.queryItems=e,this}setQueryItem(e,t){return void 0===this.queryItems&&(this.queryItems={}),this.queryItems[e]=t,this}removeQueryItem(e){return delete this.queryItems?.[e],this}setFragment(e){return this.fragment=e,this}update(e){let t;return t="string"==typeof e?a(e):e,void 0!==t.protocol&&this.setProtocol(t.protocol),void 0!==t.username&&this.setUsername(t.username),void 0!==t.password&&this.setPassword(t.password),void 0!==t.hostname&&this.setHostname(t.hostname),void 0!==t.port&&this.setPort(t.port),void 0!==t.path&&this.setPath(t.path),void 0!==t.queryItems&&this.setQueryItems(t.queryItems),void 0!==t.fragment&&this.setFragment(t.fragment),this}}const l="cookie_store_cookies";class u extends n{options;_cookies={};get cookies(){return Object.freeze(Object.values(this._cookies))}set cookies(e){const t={};for(const n of e)this.isCookieExpired(n)||(t[this.cookieIdentifier(n)]=n);this._cookies=t,this.saveCookiesToStorage()}constructor(e){super("cookie_store"),this.options=e,this.loadCookiesFromStorage()}async interceptRequest(e){return e.cookies={...e.cookies??{},...this.cookiesForUrl(e.url).reduce((e,t)=>(e[t.name]=t.value,e),{})},e}async interceptResponse(e,t,n){const o=this._cookies;for(const e of t.cookies){const t=this.cookieIdentifier(e);this.isCookieExpired(e)?delete o[t]:o[t]=e}return this._cookies=o,this.saveCookiesToStorage(),n}setCookie(e){this.isCookieExpired(e)||(this._cookies[this.cookieIdentifier(e)]=e,this.saveCookiesToStorage())}deleteCookie(e){delete this._cookies[this.cookieIdentifier(e)]}cookiesForUrl(e){console.log("[COMPAT] COOKIES FOR URL");const t=new c(e),n=t.hostname;if(!n)return[];const o={},s=t.path.startsWith("/")?t.path:`/${t.path}`,r=n.split("."),i=s.split("/");i.shift();const a=this.cookies;for(const e of a){if(this.isCookieExpired(e)){delete this._cookies[this.cookieIdentifier(e)];continue}const t=this.cookieSanitizedDomain(e).split(".");if(r.length<t.length||0==t.length)continue;let n=!0;for(let e=0;e<t.length;e++){const o=t.length-1-e,s=r.length-1-e;if(t[o]!=r[s]){n=!1;break}}if(!n)continue;const a=this.cookieSanitizedPath(e),c=a.split("/");c.shift();let l=0;if(s===a)l=Number.MAX_SAFE_INTEGER;else if(0===c.length||"/"===a)l=1;else if(s.startsWith(a)&&i.length>=c.length)for(let e=0;e<c.length&&c[e]===i[e];e++)l+=1;l<=0||(o[e.name]?.pathMatches??0)<l&&(o[e.name]={cookie:e,pathMatches:l})}return Object.values(o).map(e=>e.cookie)}cookieIdentifier(e){return`${e.name}-${this.cookieSanitizedDomain(e)}-${this.cookieSanitizedPath(e)}`}cookieSanitizedPath(e){return e.path?.startsWith("/")?e.path:"/"+(e.path??"")}cookieSanitizedDomain(e){return e.domain.replace(/^(www)?\.?/gi,"").toLowerCase()}isCookieExpired(e){return!!(e.expires&&e.expires.getTime()<=Date.now())}loadCookiesFromStorage(){if("memory"==this.options.storage)return;const e=Application.getState(l);if(!e)return void(this._cookies={});const t={};for(const n of e)n.expires&&!this.isCookieExpired(n)&&(t[this.cookieIdentifier(n)]=n);this._cookies=t}saveCookiesToStorage(){"memory"!=this.options.storage&&Application.setState(this.cookies.filter(e=>e.expires),l)}}var h,d;!function(e){e[e.NONE=0]="NONE",e[e.MANGA_CHAPTERS=1]="MANGA_CHAPTERS",e[e.CHAPTER_PROVIDING=1]="CHAPTER_PROVIDING",e[e.MANGA_PROGRESS=2]="MANGA_PROGRESS",e[e.MANGA_PROGRESS_PROVIDING=2]="MANGA_PROGRESS_PROVIDING",e[e.DISCOVER_SECIONS=4]="DISCOVER_SECIONS",e[e.DISCOVER_SECIONS_PROVIDING=4]="DISCOVER_SECIONS_PROVIDING",e[e.COLLECTION_MANAGEMENT=8]="COLLECTION_MANAGEMENT",e[e.MANAGED_COLLECTION_PROVIDING=8]="MANAGED_COLLECTION_PROVIDING",e[e.CLOUDFLARE_BYPASS_REQUIRED=16]="CLOUDFLARE_BYPASS_REQUIRED",e[e.CLOUDFLARE_BYPASS_PROVIDING=16]="CLOUDFLARE_BYPASS_PROVIDING",e[e.SETTINGS_UI=32]="SETTINGS_UI",e[e.SETTINGS_FORM_PROVIDING=32]="SETTINGS_FORM_PROVIDING",e[e.MANGA_SEARCH=64]="MANGA_SEARCH",e[e.SEARCH_RESULTS_PROVIDING=64]="SEARCH_RESULTS_PROVIDING"}(h||(h={})),function(e){e.EVERYONE="SAFE",e.MATURE="MATURE",e.ADULT="ADULT"}(d||(d={}));var p=Object.defineProperty,f=(e,t)=>p(e,"name",{value:t,configurable:!0}),g=(e,t)=>{for(var n in t)p(e,n,{get:t[n],enumerable:!0})},m={};g(m,{addChainableMethod:()=>vt,addLengthGuard:()=>ct,addMethod:()=>pt,addProperty:()=>it,checkError:()=>b,compareByInspect:()=>St,eql:()=>$e,expectTypes:()=>k,flag:()=>N,getActual:()=>j,getMessage:()=>Pe,getName:()=>Pt,getOperator:()=>It,getOwnEnumerableProperties:()=>Nt,getOwnEnumerablePropertySymbols:()=>Et,getPathInfo:()=>ot,hasProperty:()=>et,inspect:()=>Me,isNaN:()=>At,isNumeric:()=>jt,isProxyEnabled:()=>rt,isRegExp:()=>kt,objDisplay:()=>Ie,overwriteChainableMethod:()=>Ot,overwriteMethod:()=>gt,overwriteProperty:()=>ft,proxify:()=>ht,test:()=>A,transferFlags:()=>ke,type:()=>M});var b={};function y(e){return e instanceof Error||"[object Error]"===Object.prototype.toString.call(e)}function w(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function x(e,t){return y(t)&&e===t}function v(e,t){return y(t)?e.constructor===t.constructor||e instanceof t.constructor:!("object"!=typeof t&&"function"!=typeof t||!t.prototype)&&(e.constructor===t||e instanceof t)}function O(e,t){const n="string"==typeof e?e:e.message;return w(t)?t.test(n):"string"==typeof t&&-1!==n.indexOf(t)}function S(e){let t=e;return y(e)?t=e.constructor.name:"function"==typeof e&&(t=e.name,""===t)&&(t=(new e).name||t),t}function E(e){let t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t}function N(e,t,n){let o=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return o[t];o[t]=n}function A(e,t){let n=N(e,"negate"),o=t[0];return n?!o:o}function M(e){if(void 0===e)return"undefined";if(null===e)return"null";const t=e[Symbol.toStringTag];return"string"==typeof t?t:Object.prototype.toString.call(e).slice(8,-1)}g(b,{compatibleConstructor:()=>v,compatibleInstance:()=>x,compatibleMessage:()=>O,getConstructorName:()=>S,getMessage:()=>E}),f(y,"isErrorInstance"),f(w,"isRegExp"),f(x,"compatibleInstance"),f(v,"compatibleConstructor"),f(O,"compatibleMessage"),f(S,"getConstructorName"),f(E,"getMessage"),f(N,"flag"),f(A,"test"),f(M,"type");var I="captureStackTrace"in Error,P=class e extends Error{static{f(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(t="Unspecified AssertionError",n,o){super(t),this.message=t,I&&Error.captureStackTrace(this,o||e);for(const e in n)e in this||(this[e]=n[e])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:!1!==e?this.stack:void 0}}};function k(e,t){let n=N(e,"message"),o=N(e,"ssfi");n=n?n+": ":"",e=N(e,"object"),(t=t.map(function(e){return e.toLowerCase()})).sort();let s=t.map(function(e,n){let o=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&n===t.length-1?"or ":"")+o+" "+e}).join(", "),r=M(e).toLowerCase();if(!t.some(function(e){return r===e}))throw new P(n+"object tested must be "+s+", but "+r+" given",void 0,o)}function j(e,t){return t.length>4?t[4]:e._obj}f(k,"expectTypes"),f(j,"getActual");var T={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},C={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},D="â€¦";function R(e,t){const n=T[C[t]]||T[t]||"";return n?`[${n[0]}m${String(e)}[${n[1]}m`:String(e)}function $({showHidden:e=!1,depth:t=2,colors:n=!1,customInspect:o=!0,showProxy:s=!1,maxArrayLength:r=1/0,breakLength:i=1/0,seen:a=[],truncate:c=1/0,stylize:l=String}={},u){const h={showHidden:Boolean(e),depth:Number(t),colors:Boolean(n),customInspect:Boolean(o),showProxy:Boolean(s),maxArrayLength:Number(r),breakLength:Number(i),truncate:Number(c),seen:a,inspect:u,stylize:l};return h.colors&&(h.stylize=R),h}function _(e){return e>="\ud800"&&e<="\udbff"}function q(e,t,n=D){e=String(e);const o=n.length,s=e.length;if(o>t&&s>o)return n;if(s>t&&s>o){let s=t-o;return s>0&&_(e[s-1])&&(s-=1),`${e.slice(0,s)}${n}`}return e}function L(e,t,n,o=", "){n=n||t.inspect;const s=e.length;if(0===s)return"";const r=t.truncate;let i="",a="",c="";for(let l=0;l<s;l+=1){const s=l+1===e.length,u=l+2===e.length;c=`${D}(${e.length-l})`;const h=e[l];t.truncate=r-i.length-(s?0:o.length);const d=a||n(h,t)+(s?"":o),p=i.length+d.length,f=p+c.length;if(s&&p>r&&i.length+c.length<=r)break;if(!s&&!u&&f>r)break;if(a=s?"":n(e[l+1],t)+(u?"":o),!s&&u&&f>r&&p+a.length>r)break;if(i+=d,!s&&!u&&p+a.length>=r){c=`${D}(${e.length-l-1})`;break}c=""}return`${i}${c}`}function U(e){return e.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?e:JSON.stringify(e).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}function z([e,t],n){return n.truncate-=2,"string"==typeof e?e=U(e):"number"!=typeof e&&(e=`[${n.inspect(e,n)}]`),n.truncate-=e.length,`${e}: ${t=n.inspect(t,n)}`}function G(e,t){const n=Object.keys(e).slice(e.length);if(!e.length&&!n.length)return"[]";t.truncate-=4;const o=L(e,t);t.truncate-=o.length;let s="";return n.length&&(s=L(n.map(t=>[t,e[t]]),t,z)),`[ ${o}${s?`, ${s}`:""} ]`}f(R,"colorise"),f($,"normaliseOptions"),f(_,"isHighSurrogate"),f(q,"truncate"),f(L,"inspectList"),f(U,"quoteComplexKey"),f(z,"inspectProperty"),f(G,"inspectArray");var B=f(e=>"function"==typeof Buffer&&e instanceof Buffer?"Buffer":e[Symbol.toStringTag]?e[Symbol.toStringTag]:e.constructor.name,"getArrayName");function V(e,t){const n=B(e);t.truncate-=n.length+4;const o=Object.keys(e).slice(e.length);if(!e.length&&!o.length)return`${n}[]`;let s="";for(let n=0;n<e.length;n++){const o=`${t.stylize(q(e[n],t.truncate),"number")}${n===e.length-1?"":", "}`;if(t.truncate-=o.length,e[n]!==e.length&&t.truncate<=3){s+=`${D}(${e.length-e[n]+1})`;break}s+=o}let r="";return o.length&&(r=L(o.map(t=>[t,e[t]]),t,z)),`${n}[ ${s}${r?`, ${r}`:""} ]`}function F(e,t){const n=e.toJSON();if(null===n)return"Invalid Date";const o=n.split("T"),s=o[0];return t.stylize(`${s}T${q(o[1],t.truncate-s.length-1)}`,"date")}function W(e,t){const n=e[Symbol.toStringTag]||"Function",o=e.name;return o?t.stylize(`[${n} ${q(o,t.truncate-11)}]`,"special"):t.stylize(`[${n}]`,"special")}function H([e,t],n){return n.truncate-=4,e=n.inspect(e,n),n.truncate-=e.length,`${e} => ${t=n.inspect(t,n)}`}function K(e){const t=[];return e.forEach((e,n)=>{t.push([n,e])}),t}function Y(e,t){return 0===e.size?"Map{}":(t.truncate-=7,`Map{ ${L(K(e),t,H)} }`)}f(V,"inspectTypedArray"),f(F,"inspectDate"),f(W,"inspectFunction"),f(H,"inspectMapEntry"),f(K,"mapToEntries"),f(Y,"inspectMap");var Q=Number.isNaN||(e=>e!=e);function Z(e,t){return Q(e)?t.stylize("NaN","number"):e===1/0?t.stylize("Infinity","number"):e===-1/0?t.stylize("-Infinity","number"):0===e?t.stylize(1/e==1/0?"+0":"-0","number"):t.stylize(q(String(e),t.truncate),"number")}function J(e,t){let n=q(e.toString(),t.truncate-1);return n!==D&&(n+="n"),t.stylize(n,"bigint")}function X(e,t){const n=e.toString().split("/")[2],o=t.truncate-(2+n.length),s=e.source;return t.stylize(`/${q(s,o)}/${n}`,"regexp")}function ee(e){const t=[];return e.forEach(e=>{t.push(e)}),t}function te(e,t){return 0===e.size?"Set{}":(t.truncate-=7,`Set{ ${L(ee(e),t)} }`)}f(Z,"inspectNumber"),f(J,"inspectBigInt"),f(X,"inspectRegExp"),f(ee,"arrayFromSet"),f(te,"inspectSet");var ne=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),oe={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};function se(e){return oe[e]||`\\u${`0000${e.charCodeAt(0).toString(16)}`.slice(-4)}`}function re(e,t){return ne.test(e)&&(e=e.replace(ne,se)),t.stylize(`'${q(e,t.truncate-2)}'`,"string")}function ie(e){return"description"in Symbol.prototype?e.description?`Symbol(${e.description})`:"Symbol()":e.toString()}f(se,"escape"),f(re,"inspectString"),f(ie,"inspectSymbol");var ae=f(()=>"Promise{â€¦}","getPromiseValue");function ce(e,t){const n=Object.getOwnPropertyNames(e),o=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[];if(0===n.length&&0===o.length)return"{}";if(t.truncate-=4,t.seen=t.seen||[],t.seen.includes(e))return"[Circular]";t.seen.push(e);const s=L(n.map(t=>[t,e[t]]),t,z),r=L(o.map(t=>[t,e[t]]),t,z);t.seen.pop();let i="";return s&&r&&(i=", "),`{ ${s}${i}${r} }`}f(ce,"inspectObject");var le=!("undefined"==typeof Symbol||!Symbol.toStringTag)&&Symbol.toStringTag;function ue(e,t){let n="";return le&&le in e&&(n=e[le]),n=n||e.constructor.name,n&&"_class"!==n||(n="<Anonymous Class>"),t.truncate-=n.length,`${n}${ce(e,t)}`}function he(e,t){return 0===e.length?"Arguments[]":(t.truncate-=13,`Arguments[ ${L(e,t)} ]`)}f(ue,"inspectClass"),f(he,"inspectArguments");var de=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function pe(e,t){const n=Object.getOwnPropertyNames(e).filter(e=>-1===de.indexOf(e)),o=e.name;t.truncate-=o.length;let s="";if("string"==typeof e.message?s=q(e.message,t.truncate):n.unshift("message"),s=s?`: ${s}`:"",t.truncate-=s.length+5,t.seen=t.seen||[],t.seen.includes(e))return"[Circular]";t.seen.push(e);const r=L(n.map(t=>[t,e[t]]),t,z);return`${o}${s}${r?` { ${r} }`:""}`}function fe([e,t],n){return n.truncate-=3,t?`${n.stylize(String(e),"yellow")}=${n.stylize(`"${t}"`,"string")}`:`${n.stylize(String(e),"yellow")}`}function ge(e,t){return L(e,t,me,"\n")}function me(e,t){switch(e.nodeType){case 1:return be(e,t);case 3:return t.inspect(e.data,t);default:return t.inspect(e,t)}}function be(e,t){const n=e.getAttributeNames(),o=e.tagName.toLowerCase(),s=t.stylize(`<${o}`,"special"),r=t.stylize(">","special"),i=t.stylize(`</${o}>`,"special");t.truncate-=2*o.length+5;let a="";n.length>0&&(a+=" ",a+=L(n.map(t=>[t,e.getAttribute(t)]),t,fe," ")),t.truncate-=a.length;const c=t.truncate;let l=ge(e.children,t);return l&&l.length>c&&(l=`${D}(${e.children.length})`),`${s}${a}${r}${l}${i}`}f(pe,"inspectObject"),f(fe,"inspectAttribute"),f(ge,"inspectNodeCollection"),f(me,"inspectNode"),f(be,"inspectHTML");var ye="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("chai/inspect"):"@@chai/inspect",we=Symbol.for("nodejs.util.inspect.custom"),xe=new WeakMap,ve={},Oe={undefined:f((e,t)=>t.stylize("undefined","undefined"),"undefined"),null:f((e,t)=>t.stylize("null","null"),"null"),boolean:f((e,t)=>t.stylize(String(e),"boolean"),"boolean"),Boolean:f((e,t)=>t.stylize(String(e),"boolean"),"Boolean"),number:Z,Number:Z,bigint:J,BigInt:J,string:re,String:re,function:W,Function:W,symbol:ie,Symbol:ie,Array:G,Date:F,Map:Y,Set:te,RegExp:X,Promise:ae,WeakSet:f((e,t)=>t.stylize("WeakSet{â€¦}","special"),"WeakSet"),WeakMap:f((e,t)=>t.stylize("WeakMap{â€¦}","special"),"WeakMap"),Arguments:he,Int8Array:V,Uint8Array:V,Uint8ClampedArray:V,Int16Array:V,Uint16Array:V,Int32Array:V,Uint32Array:V,Float32Array:V,Float64Array:V,Generator:f(()=>"","Generator"),DataView:f(()=>"","DataView"),ArrayBuffer:f(()=>"","ArrayBuffer"),Error:pe,HTMLCollection:ge,NodeList:ge},Se=f((e,t,n)=>ye in e&&"function"==typeof e[ye]?e[ye](t):we in e&&"function"==typeof e[we]?e[we](t.depth,t):"inspect"in e&&"function"==typeof e.inspect?e.inspect(t.depth,t):"constructor"in e&&xe.has(e.constructor)?xe.get(e.constructor)(e,t):ve[n]?ve[n](e,t):"","inspectCustom"),Ee=Object.prototype.toString;function Ne(e,t={}){const n=$(t,Ne),{customInspect:o}=n;let s=null===e?"null":typeof e;if("object"===s&&(s=Ee.call(e).slice(8,-1)),s in Oe)return Oe[s](e,n);if(o&&e){const t=Se(e,n,s);if(t)return"string"==typeof t?t:Ne(t,n)}const r=!!e&&Object.getPrototypeOf(e);return r===Object.prototype||null===r?ce(e,n):e&&"function"==typeof HTMLElement&&e instanceof HTMLElement?be(e,n):"constructor"in e?e.constructor!==Object?ue(e,n):ce(e,n):e===Object(e)?ce(e,n):n.stylize(String(e),s)}f(Ne,"inspect");var Ae={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Me(e,t,n,o){return Ne(e,{colors:o,depth:void 0===n?2:n,showHidden:t,truncate:Ae.truncateThreshold?Ae.truncateThreshold:1/0})}function Ie(e){let t=Me(e),n=Object.prototype.toString.call(e);if(Ae.truncateThreshold&&t.length>=Ae.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){let t=Object.keys(e);return"{ Object ("+(t.length>2?t.splice(0,2).join(", ")+", ...":t.join(", "))+") }"}return t}return t}function Pe(e,t){let n=N(e,"negate"),o=N(e,"object"),s=t[3],r=j(e,t),i=n?t[2]:t[1],a=N(e,"message");return"function"==typeof i&&(i=i()),i=i||"",i=i.replace(/#\{this\}/g,function(){return Ie(o)}).replace(/#\{act\}/g,function(){return Ie(r)}).replace(/#\{exp\}/g,function(){return Ie(s)}),a?a+": "+i:i}function ke(e,t,n){let o=e.__flags||(e.__flags=Object.create(null));t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n;for(let e in o)(n||"object"!==e&&"ssfi"!==e&&"lockSsfi"!==e&&"message"!=e)&&(t.__flags[e]=o[e])}function je(e){if(void 0===e)return"undefined";if(null===e)return"null";const t=e[Symbol.toStringTag];return"string"==typeof t?t:Object.prototype.toString.call(e).slice(8,-1)}function Te(){this._key="chai/deep-eql__"+Math.random()+Date.now()}f(Me,"inspect"),f(Ie,"objDisplay"),f(Pe,"getMessage"),f(ke,"transferFlags"),f(je,"type"),f(Te,"FakeMap"),Te.prototype={get:f(function(e){return e[this._key]},"get"),set:f(function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})},"set")};var Ce="function"==typeof WeakMap?WeakMap:Te;function De(e,t,n){if(!n||Je(e)||Je(t))return null;var o=n.get(e);if(o){var s=o.get(t);if("boolean"==typeof s)return s}return null}function Re(e,t,n,o){if(n&&!Je(e)&&!Je(t)){var s=n.get(e);s?s.set(t,o):((s=new Ce).set(t,o),n.set(e,s))}}f(De,"memoizeCompare"),f(Re,"memoizeSet");var $e=_e;function _e(e,t,n){if(n&&n.comparator)return Le(e,t,n);var o=qe(e,t);return null!==o?o:Le(e,t,n)}function qe(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!Je(e)&&!Je(t)&&null}function Le(e,t,n){(n=n||{}).memoize=!1!==n.memoize&&(n.memoize||new Ce);var o=n&&n.comparator,s=De(e,t,n.memoize);if(null!==s)return s;var r=De(t,e,n.memoize);if(null!==r)return r;if(o){var i=o(e,t);if(!1===i||!0===i)return Re(e,t,n.memoize,i),i;var a=qe(e,t);if(null!==a)return a}var c=je(e);if(c!==je(t))return Re(e,t,n.memoize,!1),!1;Re(e,t,n.memoize,!0);var l=Ue(e,t,c,n);return Re(e,t,n.memoize,l),l}function Ue(e,t,n,o){switch(n){case"String":case"Number":case"Boolean":case"Date":return _e(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return e===t;case"Error":return Qe(e,t,["name","message","code"],o);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Be(e,t,o);case"RegExp":return ze(e,t);case"Generator":return Ve(e,t,o);case"DataView":return Be(new Uint8Array(e.buffer),new Uint8Array(t.buffer),o);case"ArrayBuffer":return Be(new Uint8Array(e),new Uint8Array(t),o);case"Set":case"Map":return Ge(e,t,o);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return e.equals(t);case"Temporal.Duration":return e.total("nanoseconds")===t.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return e.toString()===t.toString();default:return Ze(e,t,o)}}function ze(e,t){return e.toString()===t.toString()}function Ge(e,t,n){try{if(e.size!==t.size)return!1;if(0===e.size)return!0}catch(e){return!1}var o=[],s=[];return e.forEach(f(function(e,t){o.push([e,t])},"gatherEntries")),t.forEach(f(function(e,t){s.push([e,t])},"gatherEntries")),Be(o.sort(),s.sort(),n)}function Be(e,t,n){var o=e.length;if(o!==t.length)return!1;if(0===o)return!0;for(var s=-1;++s<o;)if(!1===_e(e[s],t[s],n))return!1;return!0}function Ve(e,t,n){return Be(He(e),He(t),n)}function Fe(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}function We(e){if(Fe(e))try{return He(e[Symbol.iterator]())}catch(e){return[]}return[]}function He(e){for(var t=e.next(),n=[t.value];!1===t.done;)t=e.next(),n.push(t.value);return n}function Ke(e){var t=[];for(var n in e)t.push(n);return t}function Ye(e){for(var t=[],n=Object.getOwnPropertySymbols(e),o=0;o<n.length;o+=1){var s=n[o];Object.getOwnPropertyDescriptor(e,s).enumerable&&t.push(s)}return t}function Qe(e,t,n,o){var s=n.length;if(0===s)return!0;for(var r=0;r<s;r+=1)if(!1===_e(e[n[r]],t[n[r]],o))return!1;return!0}function Ze(e,t,n){var o=Ke(e),s=Ke(t),r=Ye(e),i=Ye(t);if(o=o.concat(r),s=s.concat(i),o.length&&o.length===s.length)return!1!==Be(Xe(o).sort(),Xe(s).sort())&&Qe(e,t,o,n);var a=We(e),c=We(t);return a.length&&a.length===c.length?(a.sort(),c.sort(),Be(a,c,n)):0===o.length&&0===a.length&&0===s.length&&0===c.length}function Je(e){return null===e||"object"!=typeof e}function Xe(e){return e.map(f(function(e){return"symbol"==typeof e?e.toString():e},"mapSymbol"))}function et(e,t){return null!=e&&t in Object(e)}function tt(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(e=>{if("constructor"===e||"__proto__"===e||"prototype"===e)return{};const t=/^\[(\d+)\]$/.exec(e);let n=null;return n=t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.[\]])/g,"$1")},n})}function nt(e,t,n){let o=e,s=null;n=void 0===n?t.length:n;for(let e=0;e<n;e++){const r=t[e];o&&(o=void 0===r.p?o[r.i]:o[r.p],e===n-1&&(s=o))}return s}function ot(e,t){const n=tt(t),o=n[n.length-1],s={parent:n.length>1?nt(e,n,n.length-1):e,name:o.p||o.i,value:nt(e,n)};return s.exists=et(s.parent,s.name),s}f(_e,"deepEqual"),f(qe,"simpleEqual"),f(Le,"extensiveDeepEqual"),f(Ue,"extensiveDeepEqualByType"),f(ze,"regexpEqual"),f(Ge,"entriesEqual"),f(Be,"iterableEqual"),f(Ve,"generatorEqual"),f(Fe,"hasIteratorFunction"),f(We,"getIteratorEntries"),f(He,"getGeneratorEntries"),f(Ke,"getEnumerableKeys"),f(Ye,"getEnumerableSymbols"),f(Qe,"keysEqual"),f(Ze,"objectEqual"),f(Je,"isPrimitive"),f(Xe,"mapSymbols"),f(et,"hasProperty"),f(tt,"parsePath"),f(nt,"internalGetPathValue"),f(ot,"getPathInfo");var st=class e{static{f(this,"Assertion")}__flags={};constructor(t,n,o,s){return N(this,"ssfi",o||e),N(this,"lockSsfi",s),N(this,"object",t),N(this,"message",n),N(this,"eql",Ae.deepEqual||$e),ht(this)}static get includeStack(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Ae.includeStack}static set includeStack(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Ae.includeStack=e}static get showDiff(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Ae.showDiff}static set showDiff(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Ae.showDiff=e}static addProperty(e,t){it(this.prototype,e,t)}static addMethod(e,t){pt(this.prototype,e,t)}static addChainableMethod(e,t,n){vt(this.prototype,e,t,n)}static overwriteProperty(e,t){ft(this.prototype,e,t)}static overwriteMethod(e,t){gt(this.prototype,e,t)}static overwriteChainableMethod(e,t,n){Ot(this.prototype,e,t,n)}assert(e,t,n,o,s,r){const i=A(this,arguments);if(!1!==r&&(r=!0),void 0===o&&void 0===s&&(r=!1),!0!==Ae.showDiff&&(r=!1),!i){t=Pe(this,arguments);const e={actual:j(this,arguments),expected:o,showDiff:r},n=It(this,arguments);throw n&&(e.operator=n),new P(t,e,Ae.includeStack?this.assert:N(this,"ssfi"))}}get _obj(){return N(this,"object")}set _obj(e){N(this,"object",e)}};function rt(){return Ae.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}function it(e,t,n){n=void 0===n?function(){}:n,Object.defineProperty(e,t,{get:f(function e(){rt()||N(this,"lockSsfi")||N(this,"ssfi",e);let t=n.call(this);if(void 0!==t)return t;let o=new st;return ke(this,o),o},"propertyGetter"),configurable:!0})}f(rt,"isProxyEnabled"),f(it,"addProperty");var at=Object.getOwnPropertyDescriptor(function(){},"length");function ct(e,t,n){return at.configurable?(Object.defineProperty(e,"length",{get:f(function(){if(n)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')},"get")}),e):e}function lt(e){let t=Object.getOwnPropertyNames(e);function n(e){-1===t.indexOf(e)&&t.push(e)}f(n,"addProperty");let o=Object.getPrototypeOf(e);for(;null!==o;)Object.getOwnPropertyNames(o).forEach(n),o=Object.getPrototypeOf(o);return t}f(ct,"addLengthGuard"),f(lt,"getProperties");var ut=["__flags","__methods","_obj","assert"];function ht(e,t){return rt()?new Proxy(e,{get:f(function e(n,o){if("string"==typeof o&&-1===Ae.proxyExcludedKeys.indexOf(o)&&!Reflect.has(n,o)){if(t)throw Error("Invalid Chai property: "+t+"."+o+'. See docs for proper usage of "'+t+'".');let e=null,s=4;throw lt(n).forEach(function(t){if(!Object.prototype.hasOwnProperty(t)&&-1===ut.indexOf(t)){let n=dt(o,t,s);n<s&&(e=t,s=n)}}),null!==e?Error("Invalid Chai property: "+o+'. Did you mean "'+e+'"?'):Error("Invalid Chai property: "+o)}return-1!==ut.indexOf(o)||N(n,"lockSsfi")||N(n,"ssfi",e),Reflect.get(n,o)},"proxyGetter")}):e}function dt(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;let o=[];for(let n=0;n<=e.length;n++)o[n]=Array(t.length+1).fill(0),o[n][0]=n;for(let e=0;e<t.length;e++)o[0][e]=e;for(let s=1;s<=e.length;s++){let r=e.charCodeAt(s-1);for(let e=1;e<=t.length;e++)Math.abs(s-e)>=n?o[s][e]=n:o[s][e]=Math.min(o[s-1][e]+1,o[s][e-1]+1,o[s-1][e-1]+(r===t.charCodeAt(e-1)?0:1))}return o[e.length][t.length]}function pt(e,t,n){let o=f(function(){N(this,"lockSsfi")||N(this,"ssfi",o);let e=n.apply(this,arguments);if(void 0!==e)return e;let t=new st;return ke(this,t),t},"methodWrapper");ct(o,t,!1),e[t]=ht(o,t)}function ft(e,t,n){let o=Object.getOwnPropertyDescriptor(e,t),s=f(function(){},"_super");o&&"function"==typeof o.get&&(s=o.get),Object.defineProperty(e,t,{get:f(function e(){rt()||N(this,"lockSsfi")||N(this,"ssfi",e);let t=N(this,"lockSsfi");N(this,"lockSsfi",!0);let o=n(s).call(this);if(N(this,"lockSsfi",t),void 0!==o)return o;let r=new st;return ke(this,r),r},"overwritingPropertyGetter"),configurable:!0})}function gt(e,t,n){let o=e[t],s=f(function(){throw new Error(t+" is not a function")},"_super");o&&"function"==typeof o&&(s=o);let r=f(function(){N(this,"lockSsfi")||N(this,"ssfi",r);let e=N(this,"lockSsfi");N(this,"lockSsfi",!0);let t=n(s).apply(this,arguments);if(N(this,"lockSsfi",e),void 0!==t)return t;let o=new st;return ke(this,o),o},"overwritingMethodWrapper");ct(r,t,!1),e[t]=ht(r,t)}f(ht,"proxify"),f(dt,"stringDistanceCapped"),f(pt,"addMethod"),f(ft,"overwriteProperty"),f(gt,"overwriteMethod");var mt="function"==typeof Object.setPrototypeOf,bt=f(function(){},"testFn"),yt=Object.getOwnPropertyNames(bt).filter(function(e){let t=Object.getOwnPropertyDescriptor(bt,e);return"object"!=typeof t||!t.configurable}),wt=Function.prototype.call,xt=Function.prototype.apply;function vt(e,t,n,o){"function"!=typeof o&&(o=f(function(){},"chainingBehavior"));let s={method:n,chainingBehavior:o};e.__methods||(e.__methods={}),e.__methods[t]=s,Object.defineProperty(e,t,{get:f(function(){s.chainingBehavior.call(this);let n=f(function(){N(this,"lockSsfi")||N(this,"ssfi",n);let e=s.method.apply(this,arguments);if(void 0!==e)return e;let t=new st;return ke(this,t),t},"chainableMethodWrapper");if(ct(n,t,!0),mt){let e=Object.create(this);e.call=wt,e.apply=xt,Object.setPrototypeOf(n,e)}else Object.getOwnPropertyNames(e).forEach(function(t){if(-1!==yt.indexOf(t))return;let o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o)});return ke(this,n),ht(n)},"chainableMethodGetter"),configurable:!0})}function Ot(e,t,n,o){let s=e.__methods[t],r=s.chainingBehavior;s.chainingBehavior=f(function(){let e=o(r).call(this);if(void 0!==e)return e;let t=new st;return ke(this,t),t},"overwritingChainableMethodGetter");let i=s.method;s.method=f(function(){let e=n(i).apply(this,arguments);if(void 0!==e)return e;let t=new st;return ke(this,t),t},"overwritingChainableMethodWrapper")}function St(e,t){return Me(e)<Me(t)?-1:1}function Et(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})}function Nt(e){return Object.keys(e).concat(Et(e))}f(vt,"addChainableMethod"),f(Ot,"overwriteChainableMethod"),f(St,"compareByInspect"),f(Et,"getOwnEnumerablePropertySymbols"),f(Nt,"getOwnEnumerableProperties");var At=Number.isNaN;function Mt(e){let t=M(e);return-1!==["Array","Object","Function"].indexOf(t)}function It(e,t){let n=N(e,"operator"),o=N(e,"negate"),s=t[3],r=o?t[2]:t[1];if(n)return n;if("function"==typeof r&&(r=r()),r=r||"",!r)return;if(/\shave\s/.test(r))return;let i=Mt(s);return/\snot\s/.test(r)?i?"notDeepStrictEqual":"notStrictEqual":i?"deepStrictEqual":"strictEqual"}function Pt(e){return e.name}function kt(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function jt(e){return["Number","BigInt"].includes(M(e))}f(Mt,"isObjectType"),f(It,"getOperator"),f(Pt,"getName"),f(kt,"isRegExp"),f(jt,"isNumeric");var{flag:Tt}=m;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(e){st.addProperty(e)}),st.addProperty("not",function(){Tt(this,"negate",!0)}),st.addProperty("deep",function(){Tt(this,"deep",!0)}),st.addProperty("nested",function(){Tt(this,"nested",!0)}),st.addProperty("own",function(){Tt(this,"own",!0)}),st.addProperty("ordered",function(){Tt(this,"ordered",!0)}),st.addProperty("any",function(){Tt(this,"any",!0),Tt(this,"all",!1)}),st.addProperty("all",function(){Tt(this,"all",!0),Tt(this,"any",!1)});var Ct={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function Dt(e,t){t&&Tt(this,"message",t),e=e.toLowerCase();let n=Tt(this,"object"),o=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";const s=M(n).toLowerCase();Ct.function.includes(e)?this.assert(Ct[e].includes(s),"expected #{this} to be "+o+e,"expected #{this} not to be "+o+e):this.assert(e===s,"expected #{this} to be "+o+e,"expected #{this} not to be "+o+e)}function Rt(e,t){return At(e)&&At(t)||e===t}function $t(){Tt(this,"contains",!0)}function _t(e,t){t&&Tt(this,"message",t);let n=Tt(this,"object"),o=M(n).toLowerCase(),s=Tt(this,"message"),r=Tt(this,"negate"),i=Tt(this,"ssfi"),a=Tt(this,"deep"),c=a?"deep ":"",l=a?Tt(this,"eql"):Rt;s=s?s+": ":"";let u=!1;switch(o){case"string":u=-1!==n.indexOf(e);break;case"weakset":if(a)throw new P(s+"unable to use .deep.include with WeakSet",void 0,i);u=n.has(e);break;case"map":n.forEach(function(t){u=u||l(t,e)});break;case"set":a?n.forEach(function(t){u=u||l(t,e)}):u=n.has(e);break;case"array":u=a?n.some(function(t){return l(t,e)}):-1!==n.indexOf(e);break;default:{if(e!==Object(e))throw new P(s+"the given combination of arguments ("+o+" and "+M(e).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+M(e).toLowerCase(),void 0,i);let t=Object.keys(e),a=null,c=0;if(t.forEach(function(o){let s=new st(n);if(ke(this,s,!0),Tt(s,"lockSsfi",!0),r&&1!==t.length)try{s.property(o,e[o])}catch(e){if(!b.compatibleConstructor(e,P))throw e;null===a&&(a=e),c++}else s.property(o,e[o])},this),r&&t.length>1&&c===t.length)throw a;return}}this.assert(u,"expected #{this} to "+c+"include "+Me(e),"expected #{this} to not "+c+"include "+Me(e))}function qt(){let e=Tt(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")}function Lt(){let e=M(Tt(this,"object"));this.assert("Arguments"===e,"expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}function Ut(e,t){t&&Tt(this,"message",t);let n=Tt(this,"object");if(Tt(this,"deep")){let t=Tt(this,"lockSsfi");Tt(this,"lockSsfi",!0),this.eql(e),Tt(this,"lockSsfi",t)}else this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function zt(e,t){t&&Tt(this,"message",t);let n=Tt(this,"eql");this.assert(n(e,Tt(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function Gt(e,t){t&&Tt(this,"message",t);let n=Tt(this,"object"),o=Tt(this,"doLength"),s=Tt(this,"message"),r=s?s+": ":"",i=Tt(this,"ssfi"),a=M(n).toLowerCase(),c=M(e).toLowerCase();if(o&&"map"!==a&&"set"!==a&&new st(n,s,i,!0).to.have.property("length"),!o&&"date"===a&&"date"!==c)throw new P(r+"the argument to above must be a date",void 0,i);if(!jt(e)&&(o||jt(n)))throw new P(r+"the argument to above must be a number",void 0,i);if(!o&&"date"!==a&&!jt(n))throw new P(r+"expected "+("string"===a?"'"+n+"'":n)+" to be a number or a date",void 0,i);if(o){let t,o="length";"map"===a||"set"===a?(o="size",t=n.size):t=n.length,this.assert(t>e,"expected #{this} to have a "+o+" above #{exp} but got #{act}","expected #{this} to not have a "+o+" above #{exp}",e,t)}else this.assert(n>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function Bt(e,t){t&&Tt(this,"message",t);let n,o=Tt(this,"object"),s=Tt(this,"doLength"),r=Tt(this,"message"),i=r?r+": ":"",a=Tt(this,"ssfi"),c=M(o).toLowerCase(),l=M(e).toLowerCase(),u=!0;if(s&&"map"!==c&&"set"!==c&&new st(o,r,a,!0).to.have.property("length"),s||"date"!==c||"date"===l?jt(e)||!s&&!jt(o)?s||"date"===c||jt(o)?u=!1:n=i+"expected "+("string"===c?"'"+o+"'":o)+" to be a number or a date":n=i+"the argument to least must be a number":n=i+"the argument to least must be a date",u)throw new P(n,void 0,a);if(s){let t,n="length";"map"===c||"set"===c?(n="size",t=o.size):t=o.length,this.assert(t>=e,"expected #{this} to have a "+n+" at least #{exp} but got #{act}","expected #{this} to have a "+n+" below #{exp}",e,t)}else this.assert(o>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function Vt(e,t){t&&Tt(this,"message",t);let n,o=Tt(this,"object"),s=Tt(this,"doLength"),r=Tt(this,"message"),i=r?r+": ":"",a=Tt(this,"ssfi"),c=M(o).toLowerCase(),l=M(e).toLowerCase(),u=!0;if(s&&"map"!==c&&"set"!==c&&new st(o,r,a,!0).to.have.property("length"),s||"date"!==c||"date"===l?jt(e)||!s&&!jt(o)?s||"date"===c||jt(o)?u=!1:n=i+"expected "+("string"===c?"'"+o+"'":o)+" to be a number or a date":n=i+"the argument to below must be a number":n=i+"the argument to below must be a date",u)throw new P(n,void 0,a);if(s){let t,n="length";"map"===c||"set"===c?(n="size",t=o.size):t=o.length,this.assert(t<e,"expected #{this} to have a "+n+" below #{exp} but got #{act}","expected #{this} to not have a "+n+" below #{exp}",e,t)}else this.assert(o<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function Ft(e,t){t&&Tt(this,"message",t);let n,o=Tt(this,"object"),s=Tt(this,"doLength"),r=Tt(this,"message"),i=r?r+": ":"",a=Tt(this,"ssfi"),c=M(o).toLowerCase(),l=M(e).toLowerCase(),u=!0;if(s&&"map"!==c&&"set"!==c&&new st(o,r,a,!0).to.have.property("length"),s||"date"!==c||"date"===l?jt(e)||!s&&!jt(o)?s||"date"===c||jt(o)?u=!1:n=i+"expected "+("string"===c?"'"+o+"'":o)+" to be a number or a date":n=i+"the argument to most must be a number":n=i+"the argument to most must be a date",u)throw new P(n,void 0,a);if(s){let t,n="length";"map"===c||"set"===c?(n="size",t=o.size):t=o.length,this.assert(t<=e,"expected #{this} to have a "+n+" at most #{exp} but got #{act}","expected #{this} to have a "+n+" above #{exp}",e,t)}else this.assert(o<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function Wt(e,t){t&&Tt(this,"message",t);let n,o=Tt(this,"object"),s=Tt(this,"ssfi"),r=Tt(this,"message");try{n=o instanceof e}catch(t){if(t instanceof TypeError)throw r=r?r+": ":"",new P(r+"The instanceof assertion needs a constructor but "+M(e)+" was given.",void 0,s);throw t}let i=Pt(e);null==i&&(i="an unnamed constructor"),this.assert(n,"expected #{this} to be an instance of "+i,"expected #{this} to not be an instance of "+i)}function Ht(e,t,n){n&&Tt(this,"message",n);let o=Tt(this,"nested"),s=Tt(this,"own"),r=Tt(this,"message"),i=Tt(this,"object"),a=Tt(this,"ssfi"),c=typeof e;if(r=r?r+": ":"",o){if("string"!==c)throw new P(r+"the argument to property must be a string when using nested syntax",void 0,a)}else if("string"!==c&&"number"!==c&&"symbol"!==c)throw new P(r+"the argument to property must be a string, number, or symbol",void 0,a);if(o&&s)throw new P(r+'The "nested" and "own" flags cannot be combined.',void 0,a);if(null==i)throw new P(r+"Target cannot be null or undefined.",void 0,a);let l,u=Tt(this,"deep"),h=Tt(this,"negate"),d=o?ot(i,e):null,p=o?d.value:i[e],f=u?Tt(this,"eql"):(e,t)=>e===t,g="";u&&(g+="deep "),s&&(g+="own "),o&&(g+="nested "),g+="property ",l=s?Object.prototype.hasOwnProperty.call(i,e):o?d.exists:et(i,e),h&&1!==arguments.length||this.assert(l,"expected #{this} to have "+g+Me(e),"expected #{this} to not have "+g+Me(e)),arguments.length>1&&this.assert(l&&f(t,p),"expected #{this} to have "+g+Me(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+g+Me(e)+" of #{act}",t,p),Tt(this,"object",p)}function Kt(e,t,n){Tt(this,"own",!0),Ht.apply(this,arguments)}function Yt(e,t,n){"string"==typeof t&&(n=t,t=null),n&&Tt(this,"message",n);let o=Tt(this,"object"),s=Object.getOwnPropertyDescriptor(Object(o),e),r=Tt(this,"eql");s&&t?this.assert(r(t,s),"expected the own property descriptor for "+Me(e)+" on #{this} to match "+Me(t)+", got "+Me(s),"expected the own property descriptor for "+Me(e)+" on #{this} to not match "+Me(t),t,s,!0):this.assert(s,"expected #{this} to have an own property descriptor for "+Me(e),"expected #{this} to not have an own property descriptor for "+Me(e)),Tt(this,"object",s)}function Qt(){Tt(this,"doLength",!0)}function Zt(e,t){t&&Tt(this,"message",t);let n,o=Tt(this,"object"),s=M(o).toLowerCase(),r=Tt(this,"message"),i=Tt(this,"ssfi"),a="length";switch(s){case"map":case"set":a="size",n=o.size;break;default:new st(o,r,i,!0).to.have.property("length"),n=o.length}this.assert(n==e,"expected #{this} to have a "+a+" of #{exp} but got #{act}","expected #{this} to not have a "+a+" of #{act}",e,n)}function Jt(e,t){t&&Tt(this,"message",t);let n=Tt(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function Xt(e){let t,n,o=Tt(this,"object"),s=M(o),r=M(e),i=Tt(this,"ssfi"),a=Tt(this,"deep"),c="",l=!0,u=Tt(this,"message");u=u?u+": ":"";let h=u+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===s||"Set"===s)c=a?"deeply ":"",n=[],o.forEach(function(e,t){n.push(t)}),"Array"!==r&&(e=Array.prototype.slice.call(arguments));else{switch(n=Nt(o),r){case"Array":if(arguments.length>1)throw new P(h,void 0,i);break;case"Object":if(arguments.length>1)throw new P(h,void 0,i);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map(function(e){return"symbol"==typeof e?e:String(e)})}if(!e.length)throw new P(u+"keys required",void 0,i);let d=e.length,p=Tt(this,"any"),f=Tt(this,"all"),g=e,m=a?Tt(this,"eql"):(e,t)=>e===t;if(p||f||(f=!0),p&&(l=g.some(function(e){return n.some(function(t){return m(e,t)})})),f&&(l=g.every(function(e){return n.some(function(t){return m(e,t)})}),Tt(this,"contains")||(l=l&&e.length==n.length)),d>1){let n=(e=e.map(function(e){return Me(e)})).pop();f&&(t=e.join(", ")+", and "+n),p&&(t=e.join(", ")+", or "+n)}else t=Me(e[0]);t=(d>1?"keys ":"key ")+t,t=(Tt(this,"contains")?"contain ":"have ")+t,this.assert(l,"expected #{this} to "+c+t,"expected #{this} to not "+c+t,g.slice(0).sort(St),n.sort(St),!0)}function en(e,t,n){n&&Tt(this,"message",n);let o,s=Tt(this,"object"),r=Tt(this,"ssfi"),i=Tt(this,"message"),a=Tt(this,"negate")||!1;new st(s,i,r,!0).is.a("function"),(kt(e)||"string"==typeof e)&&(t=e,e=null);let c=!1;try{s()}catch(e){c=!0,o=e}let l=void 0===e&&void 0===t,u=Boolean(e&&t),h=!1,d=!1;if(l||!l&&!a){let t="an error";e instanceof Error?t="#{exp}":e&&(t=b.getConstructorName(e));let n=o;if(o instanceof Error)n=o.toString();else if("string"==typeof o)n=o;else if(o&&("object"==typeof o||"function"==typeof o))try{n=b.getConstructorName(o)}catch(e){}this.assert(c,"expected #{this} to throw "+t,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),n)}if(e&&o&&(e instanceof Error&&b.compatibleInstance(o,e)===a&&(u&&a?h=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(o&&!a?" but #{act} was thrown":""),e.toString(),o.toString())),b.compatibleConstructor(o,e)===a&&(u&&a?h=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(o?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&b.getConstructorName(e),o instanceof Error?o.toString():o&&b.getConstructorName(o)))),o&&null!=t){let e="including";kt(t)&&(e="matching"),b.compatibleMessage(o,t)===a&&(u&&a?d=!0:this.assert(a,"expected #{this} to throw error "+e+" #{exp} but got #{act}","expected #{this} to throw error not "+e+" #{exp}",t,b.getMessage(o)))}h&&d&&this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(o?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&b.getConstructorName(e),o instanceof Error?o.toString():o&&b.getConstructorName(o)),Tt(this,"object",o)}function tn(e,t){t&&Tt(this,"message",t);let n=Tt(this,"object"),o=Tt(this,"itself"),s="function"!=typeof n||o?n[e]:n.prototype[e];this.assert("function"==typeof s,"expected #{this} to respond to "+Me(e),"expected #{this} to not respond to "+Me(e))}function nn(e,t){t&&Tt(this,"message",t);let n=e(Tt(this,"object"));this.assert(n,"expected #{this} to satisfy "+Ie(e),"expected #{this} to not satisfy"+Ie(e),!Tt(this,"negate"),n)}function on(e,t,n){n&&Tt(this,"message",n);let o=Tt(this,"object"),s=Tt(this,"message"),r=Tt(this,"ssfi");new st(o,s,r,!0).is.numeric;let i="A `delta` value is required for `closeTo`";if(null==t)throw new P(s?`${s}: ${i}`:i,void 0,r);if(new st(t,s,r,!0).is.numeric,i="A `expected` value is required for `closeTo`",null==e)throw new P(s?`${s}: ${i}`:i,void 0,r);new st(e,s,r,!0).is.numeric;const a=f(e=>e<0n?-e:e,"abs"),c=f(e=>parseFloat(parseFloat(e).toPrecision(12)),"strip");this.assert(c(a(o-e))<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function sn(e,t,n,o,s){let r=Array.from(t),i=Array.from(e);if(!o){if(i.length!==r.length)return!1;r=r.slice()}return i.every(function(e,t){if(s)return n?n(e,r[t]):e===r[t];if(!n){let t=r.indexOf(e);return-1!==t&&(o||r.splice(t,1),!0)}return r.some(function(t,s){return!!n(e,t)&&(o||r.splice(s,1),!0)})})}function rn(e,t){t&&Tt(this,"message",t);let n=Tt(this,"object"),o=Tt(this,"message"),s=Tt(this,"ssfi"),r=Tt(this,"contains"),i=Tt(this,"deep"),a=Tt(this,"eql");new st(e,o,s,!0).to.be.an("array"),r?this.assert(e.some(function(e){return n.indexOf(e)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",e,n):i?this.assert(e.some(function(e){return a(n,e)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",e,n):this.assert(e.indexOf(n)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,n)}function an(e,t,n){n&&Tt(this,"message",n);let o,s=Tt(this,"object"),r=Tt(this,"message"),i=Tt(this,"ssfi");new st(s,r,i,!0).is.a("function"),t?(new st(e,r,i,!0).to.have.property(t),o=e[t]):(new st(e,r,i,!0).is.a("function"),o=e()),s();let a=null==t?e():e[t],c=null==t?o:"."+t;Tt(this,"deltaMsgObj",c),Tt(this,"initialDeltaValue",o),Tt(this,"finalDeltaValue",a),Tt(this,"deltaBehavior","change"),Tt(this,"realDelta",a!==o),this.assert(o!==a,"expected "+c+" to change","expected "+c+" to not change")}function cn(e,t,n){n&&Tt(this,"message",n);let o,s=Tt(this,"object"),r=Tt(this,"message"),i=Tt(this,"ssfi");new st(s,r,i,!0).is.a("function"),t?(new st(e,r,i,!0).to.have.property(t),o=e[t]):(new st(e,r,i,!0).is.a("function"),o=e()),new st(o,r,i,!0).is.a("number"),s();let a=null==t?e():e[t],c=null==t?o:"."+t;Tt(this,"deltaMsgObj",c),Tt(this,"initialDeltaValue",o),Tt(this,"finalDeltaValue",a),Tt(this,"deltaBehavior","increase"),Tt(this,"realDelta",a-o),this.assert(a-o>0,"expected "+c+" to increase","expected "+c+" to not increase")}function ln(e,t,n){n&&Tt(this,"message",n);let o,s=Tt(this,"object"),r=Tt(this,"message"),i=Tt(this,"ssfi");new st(s,r,i,!0).is.a("function"),t?(new st(e,r,i,!0).to.have.property(t),o=e[t]):(new st(e,r,i,!0).is.a("function"),o=e()),new st(o,r,i,!0).is.a("number"),s();let a=null==t?e():e[t],c=null==t?o:"."+t;Tt(this,"deltaMsgObj",c),Tt(this,"initialDeltaValue",o),Tt(this,"finalDeltaValue",a),Tt(this,"deltaBehavior","decrease"),Tt(this,"realDelta",o-a),this.assert(a-o<0,"expected "+c+" to decrease","expected "+c+" to not decrease")}function un(e,t){t&&Tt(this,"message",t);let n,o=Tt(this,"deltaMsgObj"),s=Tt(this,"initialDeltaValue"),r=Tt(this,"finalDeltaValue"),i=Tt(this,"deltaBehavior"),a=Tt(this,"realDelta");n="change"===i?Math.abs(r-s)===Math.abs(e):a===Math.abs(e),this.assert(n,"expected "+o+" to "+i+" by "+e,"expected "+o+" to not "+i+" by "+e)}function hn(e,t){return e===t||typeof t==typeof e&&("object"!=typeof e||null===e?e===t:!!t&&(Array.isArray(e)?!!Array.isArray(t)&&e.every(function(e){return t.some(function(t){return hn(e,t)})}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Object.keys(e).every(function(n){let o=e[n],s=t[n];return"object"==typeof o&&null!==o&&null!==s?hn(o,s):"function"==typeof o?o(s):s===o})))}function dn(e,t){return new st(e,t)}f(Dt,"an"),st.addChainableMethod("an",Dt),st.addChainableMethod("a",Dt),f(Rt,"SameValueZero"),f($t,"includeChainingBehavior"),f(_t,"include"),st.addChainableMethod("include",_t,$t),st.addChainableMethod("contain",_t,$t),st.addChainableMethod("contains",_t,$t),st.addChainableMethod("includes",_t,$t),st.addProperty("ok",function(){this.assert(Tt(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),st.addProperty("true",function(){this.assert(!0===Tt(this,"object"),"expected #{this} to be true","expected #{this} to be false",!Tt(this,"negate"))}),st.addProperty("numeric",function(){const e=Tt(this,"object");this.assert(["Number","BigInt"].includes(M(e)),"expected #{this} to be numeric","expected #{this} to not be numeric",!Tt(this,"negate"))}),st.addProperty("callable",function(){const e=Tt(this,"object"),t=Tt(this,"ssfi"),n=Tt(this,"message"),o=n?`${n}: `:"",s=Tt(this,"negate"),r=s?`${o}expected ${Me(e)} not to be a callable function`:`${o}expected ${Me(e)} to be a callable function`,i=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(M(e));if(i&&s||!i&&!s)throw new P(r,void 0,t)}),st.addProperty("false",function(){this.assert(!1===Tt(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!Tt(this,"negate"))}),st.addProperty("null",function(){this.assert(null===Tt(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),st.addProperty("undefined",function(){this.assert(void 0===Tt(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),st.addProperty("NaN",function(){this.assert(At(Tt(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")}),f(qt,"assertExist"),st.addProperty("exist",qt),st.addProperty("exists",qt),st.addProperty("empty",function(){let e,t=Tt(this,"object"),n=Tt(this,"ssfi"),o=Tt(this,"message");switch(o=o?o+": ":"",M(t).toLowerCase()){case"array":case"string":e=t.length;break;case"map":case"set":e=t.size;break;case"weakmap":case"weakset":throw new P(o+".empty was passed a weak collection",void 0,n);case"function":{const e=o+".empty was passed a function "+Pt(t);throw new P(e.trim(),void 0,n)}default:if(t!==Object(t))throw new P(o+".empty was passed non-string primitive "+Me(t),void 0,n);e=Object.keys(t).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")}),f(Lt,"checkArguments"),st.addProperty("arguments",Lt),st.addProperty("Arguments",Lt),f(Ut,"assertEqual"),st.addMethod("equal",Ut),st.addMethod("equals",Ut),st.addMethod("eq",Ut),f(zt,"assertEql"),st.addMethod("eql",zt),st.addMethod("eqls",zt),f(Gt,"assertAbove"),st.addMethod("above",Gt),st.addMethod("gt",Gt),st.addMethod("greaterThan",Gt),f(Bt,"assertLeast"),st.addMethod("least",Bt),st.addMethod("gte",Bt),st.addMethod("greaterThanOrEqual",Bt),f(Vt,"assertBelow"),st.addMethod("below",Vt),st.addMethod("lt",Vt),st.addMethod("lessThan",Vt),f(Ft,"assertMost"),st.addMethod("most",Ft),st.addMethod("lte",Ft),st.addMethod("lessThanOrEqual",Ft),st.addMethod("within",function(e,t,n){n&&Tt(this,"message",n);let o,s=Tt(this,"object"),r=Tt(this,"doLength"),i=Tt(this,"message"),a=i?i+": ":"",c=Tt(this,"ssfi"),l=M(s).toLowerCase(),u=M(e).toLowerCase(),h=M(t).toLowerCase(),d=!0,p="date"===u&&"date"===h?e.toISOString()+".."+t.toISOString():e+".."+t;if(r&&"map"!==l&&"set"!==l&&new st(s,i,c,!0).to.have.property("length"),r||"date"!==l||"date"===u&&"date"===h?jt(e)&&jt(t)||!r&&!jt(s)?r||"date"===l||jt(s)?d=!1:o=a+"expected "+("string"===l?"'"+s+"'":s)+" to be a number or a date":o=a+"the arguments to within must be numbers":o=a+"the arguments to within must be dates",d)throw new P(o,void 0,c);if(r){let n,o="length";"map"===l||"set"===l?(o="size",n=s.size):n=s.length,this.assert(n>=e&&n<=t,"expected #{this} to have a "+o+" within "+p,"expected #{this} to not have a "+o+" within "+p)}else this.assert(s>=e&&s<=t,"expected #{this} to be within "+p,"expected #{this} to not be within "+p)}),f(Wt,"assertInstanceOf"),st.addMethod("instanceof",Wt),st.addMethod("instanceOf",Wt),f(Ht,"assertProperty"),st.addMethod("property",Ht),f(Kt,"assertOwnProperty"),st.addMethod("ownProperty",Kt),st.addMethod("haveOwnProperty",Kt),f(Yt,"assertOwnPropertyDescriptor"),st.addMethod("ownPropertyDescriptor",Yt),st.addMethod("haveOwnPropertyDescriptor",Yt),f(Qt,"assertLengthChain"),f(Zt,"assertLength"),st.addChainableMethod("length",Zt,Qt),st.addChainableMethod("lengthOf",Zt,Qt),f(Jt,"assertMatch"),st.addMethod("match",Jt),st.addMethod("matches",Jt),st.addMethod("string",function(e,t){t&&Tt(this,"message",t);let n=Tt(this,"object"),o=Tt(this,"message"),s=Tt(this,"ssfi");new st(n,o,s,!0).is.a("string"),this.assert(~n.indexOf(e),"expected #{this} to contain "+Me(e),"expected #{this} to not contain "+Me(e))}),f(Xt,"assertKeys"),st.addMethod("keys",Xt),st.addMethod("key",Xt),f(en,"assertThrows"),st.addMethod("throw",en),st.addMethod("throws",en),st.addMethod("Throw",en),f(tn,"respondTo"),st.addMethod("respondTo",tn),st.addMethod("respondsTo",tn),st.addProperty("itself",function(){Tt(this,"itself",!0)}),f(nn,"satisfy"),st.addMethod("satisfy",nn),st.addMethod("satisfies",nn),f(on,"closeTo"),st.addMethod("closeTo",on),st.addMethod("approximately",on),f(sn,"isSubsetOf"),st.addMethod("members",function(e,t){t&&Tt(this,"message",t);let n=Tt(this,"object"),o=Tt(this,"message"),s=Tt(this,"ssfi");new st(n,o,s,!0).to.be.iterable,new st(e,o,s,!0).to.be.iterable;let r,i,a,c=Tt(this,"contains"),l=Tt(this,"ordered");c?(r=l?"an ordered superset":"a superset",i="expected #{this} to be "+r+" of #{exp}",a="expected #{this} to not be "+r+" of #{exp}"):(r=l?"ordered members":"members",i="expected #{this} to have the same "+r+" as #{exp}",a="expected #{this} to not have the same "+r+" as #{exp}");let u=Tt(this,"deep")?Tt(this,"eql"):void 0;this.assert(sn(e,n,u,c,l),i,a,e,n,!0)}),st.addProperty("iterable",function(e){e&&Tt(this,"message",e);let t=Tt(this,"object");this.assert(null!=t&&t[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",t)}),f(rn,"oneOf"),st.addMethod("oneOf",rn),f(an,"assertChanges"),st.addMethod("change",an),st.addMethod("changes",an),f(cn,"assertIncreases"),st.addMethod("increase",cn),st.addMethod("increases",cn),f(ln,"assertDecreases"),st.addMethod("decrease",ln),st.addMethod("decreases",ln),f(un,"assertDelta"),st.addMethod("by",un),st.addProperty("extensible",function(){let e=Tt(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")}),st.addProperty("sealed",function(){let e=Tt(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")}),st.addProperty("frozen",function(){let e=Tt(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")}),st.addProperty("finite",function(e){let t=Tt(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}),f(hn,"compareSubset"),st.addMethod("containSubset",function(e){const t=N(this,"object"),n=Ae.showDiff;this.assert(hn(e,t),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",e,t,n)}),f(dn,"expect"),dn.fail=function(e,t,n,o){throw arguments.length<2&&(n=e,e=void 0),new P(n=n||"expect.fail()",{actual:e,expected:t,operator:o},dn.fail)};var pn={};function fn(){function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol||"function"==typeof BigInt&&this instanceof BigInt?new st(this.valueOf(),null,e):new st(this,null,e)}function t(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})}f(e,"shouldGetter"),f(t,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:t,get:e,configurable:!0});let n={fail:function(e,t,o,s){throw arguments.length<2&&(o=e,e=void 0),new P(o=o||"should.fail()",{actual:e,expected:t,operator:s},n.fail)},equal:function(e,t,n){new st(e,n).to.equal(t)},Throw:function(e,t,n,o){new st(e,o).to.Throw(t,n)},exist:function(e,t){new st(e,t).to.exist},not:{}};return n.not.equal=function(e,t,n){new st(e,n).to.not.equal(t)},n.not.Throw=function(e,t,n,o){new st(e,o).to.not.Throw(t,n)},n.not.exist=function(e,t){new st(e,t).to.not.exist},n.throw=n.Throw,n.not.throw=n.not.Throw,n}g(pn,{Should:()=>mn,should:()=>gn}),f(fn,"loadShould");var gn=fn,mn=fn;function bn(e,t){new st(null,null,bn,!0).assert(e,t,"[ negation message unavailable ]")}f(bn,"assert"),bn.fail=function(e,t,n,o){throw arguments.length<2&&(n=e,e=void 0),new P(n=n||"assert.fail()",{actual:e,expected:t,operator:o},bn.fail)},bn.isOk=function(e,t){new st(e,t,bn.isOk,!0).is.ok},bn.isNotOk=function(e,t){new st(e,t,bn.isNotOk,!0).is.not.ok},bn.equal=function(e,t,n){let o=new st(e,n,bn.equal,!0);o.assert(t==N(o,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},bn.notEqual=function(e,t,n){let o=new st(e,n,bn.notEqual,!0);o.assert(t!=N(o,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},bn.strictEqual=function(e,t,n){new st(e,n,bn.strictEqual,!0).to.equal(t)},bn.notStrictEqual=function(e,t,n){new st(e,n,bn.notStrictEqual,!0).to.not.equal(t)},bn.deepEqual=bn.deepStrictEqual=function(e,t,n){new st(e,n,bn.deepEqual,!0).to.eql(t)},bn.notDeepEqual=function(e,t,n){new st(e,n,bn.notDeepEqual,!0).to.not.eql(t)},bn.isAbove=function(e,t,n){new st(e,n,bn.isAbove,!0).to.be.above(t)},bn.isAtLeast=function(e,t,n){new st(e,n,bn.isAtLeast,!0).to.be.least(t)},bn.isBelow=function(e,t,n){new st(e,n,bn.isBelow,!0).to.be.below(t)},bn.isAtMost=function(e,t,n){new st(e,n,bn.isAtMost,!0).to.be.most(t)},bn.isTrue=function(e,t){new st(e,t,bn.isTrue,!0).is.true},bn.isNotTrue=function(e,t){new st(e,t,bn.isNotTrue,!0).to.not.equal(!0)},bn.isFalse=function(e,t){new st(e,t,bn.isFalse,!0).is.false},bn.isNotFalse=function(e,t){new st(e,t,bn.isNotFalse,!0).to.not.equal(!1)},bn.isNull=function(e,t){new st(e,t,bn.isNull,!0).to.equal(null)},bn.isNotNull=function(e,t){new st(e,t,bn.isNotNull,!0).to.not.equal(null)},bn.isNaN=function(e,t){new st(e,t,bn.isNaN,!0).to.be.NaN},bn.isNotNaN=function(e,t){new st(e,t,bn.isNotNaN,!0).not.to.be.NaN},bn.exists=function(e,t){new st(e,t,bn.exists,!0).to.exist},bn.notExists=function(e,t){new st(e,t,bn.notExists,!0).to.not.exist},bn.isUndefined=function(e,t){new st(e,t,bn.isUndefined,!0).to.equal(void 0)},bn.isDefined=function(e,t){new st(e,t,bn.isDefined,!0).to.not.equal(void 0)},bn.isCallable=function(e,t){new st(e,t,bn.isCallable,!0).is.callable},bn.isNotCallable=function(e,t){new st(e,t,bn.isNotCallable,!0).is.not.callable},bn.isObject=function(e,t){new st(e,t,bn.isObject,!0).to.be.a("object")},bn.isNotObject=function(e,t){new st(e,t,bn.isNotObject,!0).to.not.be.a("object")},bn.isArray=function(e,t){new st(e,t,bn.isArray,!0).to.be.an("array")},bn.isNotArray=function(e,t){new st(e,t,bn.isNotArray,!0).to.not.be.an("array")},bn.isString=function(e,t){new st(e,t,bn.isString,!0).to.be.a("string")},bn.isNotString=function(e,t){new st(e,t,bn.isNotString,!0).to.not.be.a("string")},bn.isNumber=function(e,t){new st(e,t,bn.isNumber,!0).to.be.a("number")},bn.isNotNumber=function(e,t){new st(e,t,bn.isNotNumber,!0).to.not.be.a("number")},bn.isNumeric=function(e,t){new st(e,t,bn.isNumeric,!0).is.numeric},bn.isNotNumeric=function(e,t){new st(e,t,bn.isNotNumeric,!0).is.not.numeric},bn.isFinite=function(e,t){new st(e,t,bn.isFinite,!0).to.be.finite},bn.isBoolean=function(e,t){new st(e,t,bn.isBoolean,!0).to.be.a("boolean")},bn.isNotBoolean=function(e,t){new st(e,t,bn.isNotBoolean,!0).to.not.be.a("boolean")},bn.typeOf=function(e,t,n){new st(e,n,bn.typeOf,!0).to.be.a(t)},bn.notTypeOf=function(e,t,n){new st(e,n,bn.notTypeOf,!0).to.not.be.a(t)},bn.instanceOf=function(e,t,n){new st(e,n,bn.instanceOf,!0).to.be.instanceOf(t)},bn.notInstanceOf=function(e,t,n){new st(e,n,bn.notInstanceOf,!0).to.not.be.instanceOf(t)},bn.include=function(e,t,n){new st(e,n,bn.include,!0).include(t)},bn.notInclude=function(e,t,n){new st(e,n,bn.notInclude,!0).not.include(t)},bn.deepInclude=function(e,t,n){new st(e,n,bn.deepInclude,!0).deep.include(t)},bn.notDeepInclude=function(e,t,n){new st(e,n,bn.notDeepInclude,!0).not.deep.include(t)},bn.nestedInclude=function(e,t,n){new st(e,n,bn.nestedInclude,!0).nested.include(t)},bn.notNestedInclude=function(e,t,n){new st(e,n,bn.notNestedInclude,!0).not.nested.include(t)},bn.deepNestedInclude=function(e,t,n){new st(e,n,bn.deepNestedInclude,!0).deep.nested.include(t)},bn.notDeepNestedInclude=function(e,t,n){new st(e,n,bn.notDeepNestedInclude,!0).not.deep.nested.include(t)},bn.ownInclude=function(e,t,n){new st(e,n,bn.ownInclude,!0).own.include(t)},bn.notOwnInclude=function(e,t,n){new st(e,n,bn.notOwnInclude,!0).not.own.include(t)},bn.deepOwnInclude=function(e,t,n){new st(e,n,bn.deepOwnInclude,!0).deep.own.include(t)},bn.notDeepOwnInclude=function(e,t,n){new st(e,n,bn.notDeepOwnInclude,!0).not.deep.own.include(t)},bn.match=function(e,t,n){new st(e,n,bn.match,!0).to.match(t)},bn.notMatch=function(e,t,n){new st(e,n,bn.notMatch,!0).to.not.match(t)},bn.property=function(e,t,n){new st(e,n,bn.property,!0).to.have.property(t)},bn.notProperty=function(e,t,n){new st(e,n,bn.notProperty,!0).to.not.have.property(t)},bn.propertyVal=function(e,t,n,o){new st(e,o,bn.propertyVal,!0).to.have.property(t,n)},bn.notPropertyVal=function(e,t,n,o){new st(e,o,bn.notPropertyVal,!0).to.not.have.property(t,n)},bn.deepPropertyVal=function(e,t,n,o){new st(e,o,bn.deepPropertyVal,!0).to.have.deep.property(t,n)},bn.notDeepPropertyVal=function(e,t,n,o){new st(e,o,bn.notDeepPropertyVal,!0).to.not.have.deep.property(t,n)},bn.ownProperty=function(e,t,n){new st(e,n,bn.ownProperty,!0).to.have.own.property(t)},bn.notOwnProperty=function(e,t,n){new st(e,n,bn.notOwnProperty,!0).to.not.have.own.property(t)},bn.ownPropertyVal=function(e,t,n,o){new st(e,o,bn.ownPropertyVal,!0).to.have.own.property(t,n)},bn.notOwnPropertyVal=function(e,t,n,o){new st(e,o,bn.notOwnPropertyVal,!0).to.not.have.own.property(t,n)},bn.deepOwnPropertyVal=function(e,t,n,o){new st(e,o,bn.deepOwnPropertyVal,!0).to.have.deep.own.property(t,n)},bn.notDeepOwnPropertyVal=function(e,t,n,o){new st(e,o,bn.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,n)},bn.nestedProperty=function(e,t,n){new st(e,n,bn.nestedProperty,!0).to.have.nested.property(t)},bn.notNestedProperty=function(e,t,n){new st(e,n,bn.notNestedProperty,!0).to.not.have.nested.property(t)},bn.nestedPropertyVal=function(e,t,n,o){new st(e,o,bn.nestedPropertyVal,!0).to.have.nested.property(t,n)},bn.notNestedPropertyVal=function(e,t,n,o){new st(e,o,bn.notNestedPropertyVal,!0).to.not.have.nested.property(t,n)},bn.deepNestedPropertyVal=function(e,t,n,o){new st(e,o,bn.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,n)},bn.notDeepNestedPropertyVal=function(e,t,n,o){new st(e,o,bn.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,n)},bn.lengthOf=function(e,t,n){new st(e,n,bn.lengthOf,!0).to.have.lengthOf(t)},bn.hasAnyKeys=function(e,t,n){new st(e,n,bn.hasAnyKeys,!0).to.have.any.keys(t)},bn.hasAllKeys=function(e,t,n){new st(e,n,bn.hasAllKeys,!0).to.have.all.keys(t)},bn.containsAllKeys=function(e,t,n){new st(e,n,bn.containsAllKeys,!0).to.contain.all.keys(t)},bn.doesNotHaveAnyKeys=function(e,t,n){new st(e,n,bn.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},bn.doesNotHaveAllKeys=function(e,t,n){new st(e,n,bn.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},bn.hasAnyDeepKeys=function(e,t,n){new st(e,n,bn.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},bn.hasAllDeepKeys=function(e,t,n){new st(e,n,bn.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},bn.containsAllDeepKeys=function(e,t,n){new st(e,n,bn.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},bn.doesNotHaveAnyDeepKeys=function(e,t,n){new st(e,n,bn.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},bn.doesNotHaveAllDeepKeys=function(e,t,n){new st(e,n,bn.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},bn.throws=function(e,t,n,o){return("string"==typeof t||t instanceof RegExp)&&(n=t,t=null),N(new st(e,o,bn.throws,!0).to.throw(t,n),"object")},bn.doesNotThrow=function(e,t,n,o){("string"==typeof t||t instanceof RegExp)&&(n=t,t=null),new st(e,o,bn.doesNotThrow,!0).to.not.throw(t,n)},bn.operator=function(e,t,n,o){let s;switch(t){case"==":s=e==n;break;case"===":s=e===n;break;case">":s=e>n;break;case">=":s=e>=n;break;case"<":s=e<n;break;case"<=":s=e<=n;break;case"!=":s=e!=n;break;case"!==":s=e!==n;break;default:throw new P((o=o?o+": ":o)+'Invalid operator "'+t+'"',void 0,bn.operator)}let r=new st(s,o,bn.operator,!0);r.assert(!0===N(r,"object"),"expected "+Me(e)+" to be "+t+" "+Me(n),"expected "+Me(e)+" to not be "+t+" "+Me(n))},bn.closeTo=function(e,t,n,o){new st(e,o,bn.closeTo,!0).to.be.closeTo(t,n)},bn.approximately=function(e,t,n,o){new st(e,o,bn.approximately,!0).to.be.approximately(t,n)},bn.sameMembers=function(e,t,n){new st(e,n,bn.sameMembers,!0).to.have.same.members(t)},bn.notSameMembers=function(e,t,n){new st(e,n,bn.notSameMembers,!0).to.not.have.same.members(t)},bn.sameDeepMembers=function(e,t,n){new st(e,n,bn.sameDeepMembers,!0).to.have.same.deep.members(t)},bn.notSameDeepMembers=function(e,t,n){new st(e,n,bn.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},bn.sameOrderedMembers=function(e,t,n){new st(e,n,bn.sameOrderedMembers,!0).to.have.same.ordered.members(t)},bn.notSameOrderedMembers=function(e,t,n){new st(e,n,bn.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},bn.sameDeepOrderedMembers=function(e,t,n){new st(e,n,bn.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},bn.notSameDeepOrderedMembers=function(e,t,n){new st(e,n,bn.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},bn.includeMembers=function(e,t,n){new st(e,n,bn.includeMembers,!0).to.include.members(t)},bn.notIncludeMembers=function(e,t,n){new st(e,n,bn.notIncludeMembers,!0).to.not.include.members(t)},bn.includeDeepMembers=function(e,t,n){new st(e,n,bn.includeDeepMembers,!0).to.include.deep.members(t)},bn.notIncludeDeepMembers=function(e,t,n){new st(e,n,bn.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},bn.includeOrderedMembers=function(e,t,n){new st(e,n,bn.includeOrderedMembers,!0).to.include.ordered.members(t)},bn.notIncludeOrderedMembers=function(e,t,n){new st(e,n,bn.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},bn.includeDeepOrderedMembers=function(e,t,n){new st(e,n,bn.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},bn.notIncludeDeepOrderedMembers=function(e,t,n){new st(e,n,bn.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},bn.oneOf=function(e,t,n){new st(e,n,bn.oneOf,!0).to.be.oneOf(t)},bn.isIterable=function(e,t){if(null==e||!e[Symbol.iterator])throw t=t?`${t} expected ${Me(e)} to be an iterable`:`expected ${Me(e)} to be an iterable`,new P(t,void 0,bn.isIterable)},bn.changes=function(e,t,n,o){3===arguments.length&&"function"==typeof t&&(o=n,n=null),new st(e,o,bn.changes,!0).to.change(t,n)},bn.changesBy=function(e,t,n,o,s){if(4===arguments.length&&"function"==typeof t){let e=o;o=n,s=e}else 3===arguments.length&&(o=n,n=null);new st(e,s,bn.changesBy,!0).to.change(t,n).by(o)},bn.doesNotChange=function(e,t,n,o){return 3===arguments.length&&"function"==typeof t&&(o=n,n=null),new st(e,o,bn.doesNotChange,!0).to.not.change(t,n)},bn.changesButNotBy=function(e,t,n,o,s){if(4===arguments.length&&"function"==typeof t){let e=o;o=n,s=e}else 3===arguments.length&&(o=n,n=null);new st(e,s,bn.changesButNotBy,!0).to.change(t,n).but.not.by(o)},bn.increases=function(e,t,n,o){return 3===arguments.length&&"function"==typeof t&&(o=n,n=null),new st(e,o,bn.increases,!0).to.increase(t,n)},bn.increasesBy=function(e,t,n,o,s){if(4===arguments.length&&"function"==typeof t){let e=o;o=n,s=e}else 3===arguments.length&&(o=n,n=null);new st(e,s,bn.increasesBy,!0).to.increase(t,n).by(o)},bn.doesNotIncrease=function(e,t,n,o){return 3===arguments.length&&"function"==typeof t&&(o=n,n=null),new st(e,o,bn.doesNotIncrease,!0).to.not.increase(t,n)},bn.increasesButNotBy=function(e,t,n,o,s){if(4===arguments.length&&"function"==typeof t){let e=o;o=n,s=e}else 3===arguments.length&&(o=n,n=null);new st(e,s,bn.increasesButNotBy,!0).to.increase(t,n).but.not.by(o)},bn.decreases=function(e,t,n,o){return 3===arguments.length&&"function"==typeof t&&(o=n,n=null),new st(e,o,bn.decreases,!0).to.decrease(t,n)},bn.decreasesBy=function(e,t,n,o,s){if(4===arguments.length&&"function"==typeof t){let e=o;o=n,s=e}else 3===arguments.length&&(o=n,n=null);new st(e,s,bn.decreasesBy,!0).to.decrease(t,n).by(o)},bn.doesNotDecrease=function(e,t,n,o){return 3===arguments.length&&"function"==typeof t&&(o=n,n=null),new st(e,o,bn.doesNotDecrease,!0).to.not.decrease(t,n)},bn.doesNotDecreaseBy=function(e,t,n,o,s){if(4===arguments.length&&"function"==typeof t){let e=o;o=n,s=e}else 3===arguments.length&&(o=n,n=null);return new st(e,s,bn.doesNotDecreaseBy,!0).to.not.decrease(t,n).by(o)},bn.decreasesButNotBy=function(e,t,n,o,s){if(4===arguments.length&&"function"==typeof t){let e=o;o=n,s=e}else 3===arguments.length&&(o=n,n=null);new st(e,s,bn.decreasesButNotBy,!0).to.decrease(t,n).but.not.by(o)},bn.ifError=function(e){if(e)throw e},bn.isExtensible=function(e,t){new st(e,t,bn.isExtensible,!0).to.be.extensible},bn.isNotExtensible=function(e,t){new st(e,t,bn.isNotExtensible,!0).to.not.be.extensible},bn.isSealed=function(e,t){new st(e,t,bn.isSealed,!0).to.be.sealed},bn.isNotSealed=function(e,t){new st(e,t,bn.isNotSealed,!0).to.not.be.sealed},bn.isFrozen=function(e,t){new st(e,t,bn.isFrozen,!0).to.be.frozen},bn.isNotFrozen=function(e,t){new st(e,t,bn.isNotFrozen,!0).to.not.be.frozen},bn.isEmpty=function(e,t){new st(e,t,bn.isEmpty,!0).to.be.empty},bn.isNotEmpty=function(e,t){new st(e,t,bn.isNotEmpty,!0).to.not.be.empty},bn.containsSubset=function(e,t,n){new st(e,n).to.containSubset(t)},bn.doesNotContainSubset=function(e,t,n){new st(e,n).to.not.containSubset(t)};for(const[e,t]of[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]])bn[t]=bn[e];var yn,wn,xn,vn,On,Sn=[];f(function e(t){const n={use:e,AssertionError:P,util:m,config:Ae,expect:dn,assert:bn,Assertion:st,...pn};return~Sn.indexOf(t)||(t(n,m),Sn.push(t)),n},"use"),function(e){e[e.featured=0]="featured",e[e.simpleCarousel=1]="simpleCarousel",e[e.prominentCarousel=2]="prominentCarousel",e[e.chapterUpdates=3]="chapterUpdates",e[e.genres=4]="genres"}(yn||(yn={})),Object.freeze({items:[],metadata:void 0});class En{cheerio;constructor(e){this.cheerio=e}searchRequest(e,t){return this.getSearchResults(e,t)}async getTags(){return this.getSearchTags?.()??[]}}!function(e){e.singleRowNormal="singleRowNormal",e.singleRowLarge="singleRowLarge",e.doubleRow="doubleRow",e.featured="featured"}(wn||(wn={})),function(e){e[e.MANGA_CHAPTERS=1]="MANGA_CHAPTERS",e[e.MANGA_TRACKING=2]="MANGA_TRACKING",e[e.HOMEPAGE_SECTIONS=4]="HOMEPAGE_SECTIONS",e[e.COLLECTION_MANAGEMENT=8]="COLLECTION_MANAGEMENT",e[e.CLOUDFLARE_BYPASS_REQUIRED=16]="CLOUDFLARE_BYPASS_REQUIRED",e[e.SETTINGS_UI=32]="SETTINGS_UI"}(xn||(xn={})),function(e){e.EVERYONE="EVERYONE",e.MATURE="MATURE",e.ADULT="ADULT"}(vn||(vn={})),function(e){e.BLUE="default",e.GREEN="success",e.GREY="info",e.YELLOW="warning",e.RED="danger"}(On||(On={}));const Nn={};function An(e){let t=e.url;e.param&&(t+=e.param);const n={};for(const t of e.cookies??[])n[t.name]=t.value;return{url:t,method:e.method,body:e.data,headers:e.headers,cookies:n}}Nn.createSourceStateManager=function(){return{keychain:{async store(e,t){Application.setSecureState(t,e)},async retrieve(e){return Application.getSecureState(e)}},async store(e,t){Application.setState(t,e)},async retrieve(e){return Application.getState(e)}}},Nn.createRequestManager=function(e){const t=new class extends n{legacyInterceptor;constructor(e){super("main"),this.legacyInterceptor=e}async interceptRequest(e){if(!this.legacyInterceptor)return e;const t=function(e){return{url:e.url,method:e.method,headers:e.headers??{},cookies:Object.keys(e.cookies??{}).map(t=>({name:t,value:e.cookies[t],domain:""})),data:e.body}}(e);return An(await this.legacyInterceptor.interceptRequest(t))}async interceptResponse(e,t,n){return this.legacyInterceptor,n}}(e.interceptor),o=new i("rateLimit",{numberOfRequests:e.requestsPerSecond??2,bufferInterval:1,ignoreImages:!0}),s=new u({storage:"memory"});return t.registerInterceptor(),o.registerInterceptor(),s.registerInterceptor(),{__backing_interceptor:t,__backing_rateLimit:o,__backing_cookieStore:s,interceptor:e.interceptor,cookieStore:{getAllCookies(){return s.cookies},addCookie(e){s.setCookie(e)},removeCookie(e){s.deleteCookie(e)}},async getDefaultUserAgent(){return Application.getDefaultUserAgent()},requestsPerSecond:e.requestsPerSecond??2,requestTimeout:e.requestTimeout??3e4,async schedule(e){const t=An(e);console.log("[COMPAT] SCHEDULING REQUEST TO "+t.url);const[n,o]=await Application.scheduleRequest(t);return{request:e,headers:n.headers,status:n.status,data:Application.arrayBufferToUTF8String(o),get rawData(){return new Uint8Array(o)}}}}},globalThis.App=new Proxy(Nn,{get(e,t){if(e[t])return e[t];if("string"==typeof t&&t.startsWith("create")){if(t.startsWith("createDUI")){const e=t.slice(6);return t=>Object.defineProperty(t,"type",{enumerable:!0,value:e})}return e=>e}}});const Mn=e=>({id:e.id,mangaId:e.id,title:"string"==typeof e.title?e.title:e.title?.text||"",image:e.image,subtitle:"string"==typeof e.subtitleText?e.subtitleText:e.subtitleText?.text||""}),In=e=>({id:e.id,title:e.title,type:e.type,containsMoreItems:e.view_more||e.containsMoreItems||!1,items:e.items||[]}),Pn=e=>e.text||e,kn="https://mangatv.net",jn={version:"1.0.0",name:"MangaTV",icon:"icon.png",author:"WiLyDTG",authorWebsite:"https://github.com/WiLyDTG",description:"Extension para leer manga desde mangatv.net",contentRating:vn.MATURE,websiteBaseURL:kn,sourceTags:[{text:"Spanish",type:"info"},{text:"Manga",type:"success"}],intents:31};class Tn extends En{requestManager=(e=>"undefined"!=typeof globalThis&&globalThis.App?.createRequestManager?globalThis.App.createRequestManager(e):e)({requestsPerSecond:3,requestTimeout:15e3,interceptor:{interceptRequest:async e=>(e.headers={...e.headers??{},Referer:kn,"User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Mobile/15E148 Safari/604.1"},e),interceptResponse:async e=>e}});baseUrl=kn;getMangaShareUrl(e){return`${this.baseUrl}/manga/${e}`}getCloudflareBypassRequest(){return{url:this.baseUrl,method:"GET"}}async getMangaDetails(e){const t={url:`${this.baseUrl}/manga/${e}`,method:"GET"},n=await this.requestManager.schedule(t,1),o=this.cheerio.load(n.data),s=o("h1").first().text().trim()||o('meta[property="og:title"]').attr("content")||"Sin titulo";let r=o('img[src*="library"]').first().attr("src")||o('img[data-src*="library"]').first().attr("data-src")||o('meta[property="og:image"]').attr("content")||"";r&&!r.startsWith("http")&&(r=r.startsWith("//")?`https:${r}`:`${this.baseUrl}${r}`);const i=o("p").filter((e,t)=>{const n=o(t).text();return n.length>100&&!n.includes("Las imagenes mostradas")}).first().text().trim()||o('meta[name="description"]').attr("content")||"";let a=0;const c=o('*:contains("Estado")').text().toLowerCase();(c.includes("finalizado")||c.includes("completed"))&&(a=1);const l=[];o('a[href*="genre"]').each((e,t)=>{const n=o(t).text().trim();n&&l.push({id:n.toLowerCase(),label:n})});let u="";const h=o('*:contains("Autor")').next().text().trim();return h&&(u=h),{id:(d={id:e,titles:[s],image:r,status:a,author:u,artist:u,tags:[{id:"0",label:"Generos",tags:l}],desc:i,rating:0}).id,mangaInfo:{titles:d.titles||[d.title],image:d.image,status:d.status,author:d.author,artist:d.artist,tags:d.tags,desc:d.desc,rating:d.rating}};var d}async getChapters(e){const t={url:`${this.baseUrl}/manga/${e}`,method:"GET"},n=await this.requestManager.schedule(t,1),o=this.cheerio.load(n.data),s=[];return o('a[href*="/leer/"]').each((t,n)=>{const r=o(n).attr("href");if(!r)return;const i=r.split("/leer/")[1]?.split("/")[0];if(!i)return;const a=o(n).parent().text()||o(n).text(),c=a.match(/Cap[ii]tulo\s*([\d.]+)/i),l=c?parseFloat(c[1]):t+1;let u="";const h=a.match(/(\d{4}-\d{2}-\d{2})/);h&&(u=h[1]);let d="";const p=a.match(/([A-Za-z\s]+Scan[s]?|[A-Za-z\s]+Fansub)/i);p&&(d=p[1].trim()),s.find(e=>e.id===i)||s.push({id:i,mangaId:e,name:`Capitulo ${l}`,langCode:"es",chapNum:l,time:u?new Date(u):new Date,group:d})}),s.sort((e,t)=>t.chapNum-e.chapNum),s}async getChapterDetails(e,t){const n={url:`${this.baseUrl}/leer/${t}`,method:"GET"},o=await this.requestManager.schedule(n,1),s=this.cheerio.load(o.data),r=[];if(s("img").each((e,t)=>{let n=s(t).attr("src")||s(t).attr("data-src");n&&(n.startsWith("//")&&(n=`https:${n}`),(n.includes("img5.mangatv.net")||n.includes("mangatv.net")&&n.includes("/library/"))&&(r.includes(n)||r.push(n)))}),0===r.length){const e=s("script").text().match(/https?:\/\/[^"'\s]+\.(?:jpg|jpeg|png|webp|gif)/gi);e&&e.forEach(e=>{!e.includes("mangatv.net")&&!e.includes("img5.")||r.includes(e)||r.push(e)})}return{id:(i={id:t,mangaId:e,pages:r}).id,mangaId:i.mangaId,pages:i.pages};var i}async getSearchResults(e,t){const n=t?.page||1;let o=`${this.baseUrl}/lista?page=${n}`;e.title&&(o=`${this.baseUrl}/lista?buscar=${encodeURIComponent(e.title)}&page=${n}`),e.includedTags&&e.includedTags.length>0&&(o+=`&genre[]=${e.includedTags.map(e=>encodeURIComponent(e.id)).join("&genre[]=")}`);const s={url:o,method:"GET"},r=await this.requestManager.schedule(s,1),i=this.cheerio.load(r.data),a=[];i('a[href*="/manga/"]').each((e,t)=>{const n=i(t).attr("href");if(!n||n.includes("/lista"))return;const o=n.match(/\/manga\/(\d+\/[^/]+)/);if(!o)return;const s=o[1],r=i(t).text().trim()||i(t).find("img").attr("alt")||"Sin titulo";let c=i(t).find("img").attr("src")||i(t).find("img").attr("data-src")||"";c&&c.startsWith("//")&&(c=`https:${c}`),!a.find(e=>e.id===s)&&r.length>0&&!r.includes("VER TODO")&&a.push(Mn({id:s,image:c||`${this.baseUrl}/assets/images/black.png`,title:Pn({text:r})}))});const c=i('a[href*="page='+(n+1)+'"]').length>0||i('a:contains("Next")').length>0||i('a:contains(">>")').length>0;return{results:a,metadata:c?{page:n+1}:void 0}}async getHomePageSections(e){const t=In({id:"latest",title:"Ultimas Actualizaciones",type:wn.singleRowNormal,view_more:!0}),n=In({id:"popular",title:"Mangas Populares",type:wn.singleRowLarge,view_more:!0});e(t),e(n);const o={url:`${this.baseUrl}/lista`,method:"GET"},s=await this.requestManager.schedule(o,1),r=this.cheerio.load(s.data),i=[];r('a[href*="/manga/"]').each((e,t)=>{const n=r(t).attr("href");if(!n||n.includes("/lista"))return;const o=n.match(/\/manga\/(\d+\/[^/]+)/);if(!o)return;const s=o[1],a=r(t).text().trim();let c=r(t).find("img").attr("src")||r(t).find("img").attr("data-src")||"";c&&c.startsWith("//")&&(c=`https:${c}`),!i.find(e=>e.id===s)&&a.length>2&&!a.includes("VER TODO")&&i.push(Mn({id:s,image:c||`${this.baseUrl}/assets/images/black.png`,title:Pn({text:a})}))}),t.items=i.slice(0,20),e(t);const a={url:this.baseUrl,method:"GET"},c=await this.requestManager.schedule(a,1),l=this.cheerio.load(c.data),u=[];l('a[href*="/manga/"]').each((e,t)=>{const n=l(t).attr("href");if(!n)return;const o=n.match(/\/manga\/(\d+\/[^/]+)/);if(!o)return;const s=o[1],r=l(t).text().trim();let i=l(t).find("img").attr("src")||l(t).find("img").attr("data-src")||"";i&&i.startsWith("//")&&(i=`https:${i}`),!u.find(e=>e.id===s)&&r.length>2&&!r.includes("VER TODO")&&u.push(Mn({id:s,image:i||`${this.baseUrl}/assets/images/black.png`,title:Pn({text:r})}))}),n.items=u.slice(0,20),e(n)}async getViewMoreItems(e,t){const n=t?.page||1;let o=`${this.baseUrl}/lista?page=${n}`;"popular"===e&&(o=`${this.baseUrl}/lista?ordenar=votos&page=${n}`);const s={url:o,method:"GET"},r=await this.requestManager.schedule(s,1),i=this.cheerio.load(r.data),a=[];i('a[href*="/manga/"]').each((e,t)=>{const n=i(t).attr("href");if(!n||n.includes("/lista"))return;const o=n.match(/\/manga\/(\d+\/[^/]+)/);if(!o)return;const s=o[1],r=i(t).text().trim();let c=i(t).find("img").attr("src")||i(t).find("img").attr("data-src")||"";c&&c.startsWith("//")&&(c=`https:${c}`),!a.find(e=>e.id===s)&&r.length>2&&!r.includes("VER TODO")&&a.push(Mn({id:s,image:c||`${this.baseUrl}/assets/images/black.png`,title:Pn({text:r})}))});const c=i('a[href*="page='+(n+1)+'"]').length>0||i('a:contains(">>")').length>0;return{results:a,metadata:c?{page:n+1}:void 0}}async getSearchTags(){const e={url:`${this.baseUrl}/lista`,method:"GET"},t=await this.requestManager.schedule(e,1),n=this.cheerio.load(t.data),o=[];n('select[name="generos"] option, a[href*="genre"]').each((e,t)=>{const s=n(t).attr("value")||n(t).text().trim(),r=n(t).text().trim();s&&r&&"Todos"!==r&&(o.find(e=>e.id===s.toLowerCase())||o.push({id:s.toLowerCase(),label:r}))});const s=[];return n('select[name="tipos"] option').each((e,t)=>{const o=n(t).attr("value"),r=n(t).text().trim();o&&r&&"Todos"!==r&&s.push({id:o,label:r})}),[{id:"genres",label:"Generos",tags:o},{id:"types",label:"Tipo",tags:s}]}getCloudflareBypassRequest(){return{url:this.baseUrl,method:"GET",headers:{referer:this.baseUrl,"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"}}}}return t}()});